(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[4],{105:function(e,t,a){"use strict";a.r(t);var n=a(32),r=a(0),o=a.n(r),i=a(17),u=a(3),c=a(9),l=a(33),s=a.n(l),f=a(92),m=a.n(f),d=a(19),p=a(18),b=a(24),v=a(89),g=a.n(v),E=a(2),h=a.n(E),O=a(4),y=a(86),_=o.a.memo((function(e){var t=e.status,a=e.updateUserStatus,i=e.isMyProfile,u=Object(r.useState)(!1),c=Object(n.a)(u,2),l=c[0],s=c[1];return o.a.createElement(o.a.Fragment,null,l?o.a.createElement("div",{className:g.a.status},o.a.createElement(y.b,{initialValues:{status:t},onSubmit:function(e,t){var n=e.status;n!==t.getState().initialValues.status&&a(n),s(!1)},render:function(e){var t=e.handleSubmit;return o.a.createElement(y.a,{onBlur:t,autoFocus:!0,component:"input",name:"status",maxLength:"300",parse:function(e){return e}})}})):t||i?o.a.createElement("div",{className:g.a.status},o.a.createElement("span",{onDoubleClick:i?function(){s(!0)}:void 0,title:i?"Double click to change your status":"",className:i?t?g.a.myStatus:g.a.enterStatus:""},t||"Enter your status...")):void 0)})),P=a(88),k=function(e){var t=e.contacts,a=e.pageEditMode,n=!1,r=Object.entries(t).map((function(e){return e[1]||a?(n=!0,o.a.createElement("div",{key:e[0],className:g.a.contactsItem},o.a.createElement("span",null,"".concat(e[0],": ")),a?o.a.createElement(y.a,{component:P.a,name:"contacts.".concat(e[0])}):e[1])):null}));return n||a?o.a.createElement("div",{className:g.a.contactsBlock},o.a.createElement("div",{className:g.a.contactsTitle},"Contacts:"),r):""},j=function(e){var t=e.aboutMe,a=e.lookingForAJob,n=e.lookingForAJobDescription,r=e.pageEditMode;return o.a.createElement("div",{className:g.a.aboutMeBlock},r?o.a.createElement("div",{className:g.a.pageInfoRow},o.a.createElement("span",null,"About me:"),o.a.createElement(y.a,{component:P.b,name:"aboutMe",placeholder:"About me"})):t?o.a.createElement("div",{className:g.a.pageInfoRow},o.a.createElement("span",null,"About me:")," ",t):"",o.a.createElement("div",{className:g.a.pageInfoRow},o.a.createElement("span",null,"Looking for a job: "),r?o.a.createElement(y.a,{component:"input",type:"checkbox",name:"lookingForAJob"}):a?"Yes":"No"),r?o.a.createElement(y.a,{component:P.b,name:"lookingForAJobDescription",placeholder:"Description"}):n?o.a.createElement("div",{className:g.a.pageInfoRow},n):"")},S=function(e){var t=e.isMyProfile,a=e.setPageEditMode,n=e.pageEditMode,r=e.aboutMe,i=e.lookingForAJob,u=e.lookingForAJobDescription,c=e.contacts,l=e.submitError;return o.a.createElement("div",{className:g.a.personalInfoWrap},o.a.createElement("div",{className:g.a.topBorder},"Personal information",t&&!n&&o.a.createElement("button",{onClick:function(){return a(!0)},className:g.a.editModeButton,type:"button"},"Edit")),o.a.createElement("div",{className:g.a.personalInfo},o.a.createElement(j,{pageEditMode:n,aboutMe:r,lookingForAJob:i,lookingForAJobDescription:u}),o.a.createElement(k,{pageEditMode:n,contacts:c,isMyProfile:t})),n&&o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{type:"submit",className:g.a.saveButton},"Save"),o.a.createElement("button",{onClick:function(){return a(!1)},className:g.a.cancelButton,type:"button"},"Cancel"),l&&o.a.createElement("div",{className:g.a.error},l)))},M=function(e){var t=e.profile,a=e.defaultAvatar,n=e.isMyProfile,r=e.status,i=e.updateUserStatus,u=e.changeMyPhoto,c=e.pageEditMode,l=e.setPageEditMode,s=e.submitError,f=t.contacts,m=t.photos,d=t.fullName,p=t.aboutMe,b=t.lookingForAJob,v=t.lookingForAJobDescription;return o.a.createElement("div",{className:g.a.pageWrap},o.a.createElement("div",{className:g.a.avatar},o.a.createElement("img",{src:m.large||a,alt:"avatar"}),n&&o.a.createElement("input",{type:"file",onChange:function(e){e.target.files.length&&u(e.target.files[0])}})),o.a.createElement("div",{className:g.a.pageInfoWrap},o.a.createElement("div",{className:g.a.pageName},c?o.a.createElement(y.a,{component:"input",name:"fullName"}):d),o.a.createElement(_,{isMyProfile:n,status:r,updateUserStatus:i}),o.a.createElement(S,{isMyProfile:n,setPageEditMode:l,pageEditMode:c,aboutMe:p,lookingForAJob:b,lookingForAJobDescription:v,contacts:f,submitError:s})))},N=function(e){var t=Object(r.useState)(!1),a=Object(n.a)(t,2),i=a[0],u=a[1],c=e.profile,l=c.contacts,s=c.fullName,f=c.aboutMe,m=c.lookingForAJob,d=c.lookingForAJobDescription;return i?o.a.createElement(y.b,{initialValues:{contacts:l,fullName:s,aboutMe:f,lookingForAJob:m,lookingForAJobDescription:d},onSubmit:function(){var t=Object(O.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.changeUserData(a);case 2:if(!(n=t.sent)){t.next=5;break}return t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),render:function(t){var a=t.handleSubmit,n=t.submitError;return o.a.createElement("form",{onSubmit:a},o.a.createElement(M,Object.assign({},e,{pageEditMode:i,setPageEditMode:u,submitError:n})))}}):o.a.createElement(M,Object.assign({setPageEditMode:u,pageEditMode:i},e))},F=a(90),w=o.a.memo((function(e){return o.a.createElement(y.b,{onSubmit:function(t,a){e.addPost(t.newPostInput),setTimeout(a.restart)},render:function(e){var t=e.handleSubmit;return o.a.createElement("form",{className:g.a.newPostBlock,onSubmit:t},o.a.createElement(y.a,{name:"newPostInput",component:P.a,validate:Object(F.a)("",1e3,"Enter the text of your message"),placeholder:"What's up?"}),o.a.createElement("div",{className:g.a.buttonWrap},o.a.createElement("button",{type:"submit"},"Add post")))}})})),B=o.a.memo((function(e){return o.a.createElement("div",{className:g.a.existingPostsBlock},e.posts.map((function(e){return o.a.createElement("div",{key:e.id,className:g.a.post},o.a.createElement("div",null,e.textPost),o.a.createElement("div",{className:g.a.likes},e.amountLikes," likes"))})).reverse())})),A=o.a.memo((function(e){var t=e.topImage,a=e.isMyProfile,n=e.profile,r=e.defaultAvatar,i=e.status,u=e.updateUserStatus,c=e.addPost,l=e.existingPosts,s=e.isAuth,f=e.changeMyPhoto,m=e.userId,d=e.changeUserData;return o.a.createElement("div",{className:g.a.profile},o.a.createElement("div",{className:g.a.topImage},o.a.createElement("img",{src:t,alt:"cover"})),o.a.createElement("div",{className:g.a.contentBlockWrapper},o.a.createElement("div",{className:g.a.contentBlock},o.a.createElement(N,{isMyProfile:a,profile:n,defaultAvatar:r,status:i,updateUserStatus:u,changeMyPhoto:f,userId:m,changeUserData:d}),o.a.createElement("div",{className:g.a.postsBlock},s?o.a.createElement(w,{addPost:c}):"",o.a.createElement(B,{posts:l})))))})),I={updateUserStatus:p.h,getAuthUserData:d.b,addPost:p.a,getProfile:p.f,changeMyPhoto:p.b,changeUserData:p.c};t.default=Object(c.d)(Object(i.b)((function(e){return{topImage:m.a,defaultAvatar:s.a,profile:e.profilePage.profile,status:e.profilePage.status,isAuth:e.auth.isAuth,authUserId:e.auth.userId,existingPosts:e.profilePage.existingPosts}}),I),u.f)((function(e){var t=e.match.params.userId,a=e.authUserId,i=e.getProfile,c=e.isAuth,l=e.profile,s=+t,f=Object(r.useState)(!1),m=Object(n.a)(f,2),d=m[0],p=m[1];return Object(r.useEffect)((function(){s&&(a===s&&p(!0),i(s))}),[s,a,i]),Object(r.useEffect)((function(){c||p(!1)}),[c]),s?l?o.a.createElement(A,Object.assign({},e,{userId:a,isMyProfile:d})):o.a.createElement(b.a,null):c?o.a.createElement(u.a,{to:"/profile/".concat(a)}):o.a.createElement(u.a,{to:"/login"})}))},86:function(e,t,a){"use strict";a.d(t,"a",(function(){return S})),a.d(t,"b",(function(){return E}));var n=a(1),r=a(5),o=a(0),i=a.n(o),u=a(21);function c(e,t,a){var n=e.render,i=e.children,u=e.component,c=Object(r.a)(e,["render","children","component"]);if(u)return Object(o.createElement)(u,Object.assign(t,c,{children:i,render:n}));if(n)return n(void 0===i?Object.assign(t,c):Object.assign(t,c,{children:i}));if("function"!==typeof i)throw new Error("Must specify either a render prop, a render function as children, or a component prop to "+a);return i(Object.assign(t,c))}function l(e,t,a){void 0===a&&(a=function(e,t){return e===t});var n=i.a.useRef(e);i.a.useEffect((function(){a(e,n.current)||(t(),n.current=e)}))}var s=function(e,t){if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(var r=Object.prototype.hasOwnProperty.bind(t),o=0;o<a.length;o++){var i=a[o];if(!r(i)||e[i]!==t[i])return!1}return!0},f=function(e){return!(!e||"function"!==typeof e.stopPropagation)},m=Object(o.createContext)();function d(e){var t=i.a.useRef(e);return i.a.useEffect((function(){t.current=e})),t}var p=function(e,t,a){a.forEach((function(a){Object.defineProperty(e,a,{get:function(){return t[a]},enumerable:!0})}))},b=function(e,t){return p(e,t,["active","dirty","dirtyFields","dirtySinceLastSubmit","dirtyFieldsSinceLastSubmit","error","errors","hasSubmitErrors","hasValidationErrors","initialValues","invalid","modified","modifiedSinceLastSubmit","pristine","submitError","submitErrors","submitFailed","submitSucceeded","submitting","touched","valid","validating","values","visited"])},v={"final-form":u.e,"react-final-form":"6.5.0"},g=u.d.reduce((function(e,t){return e[t]=!0,e}),{});function E(e){var t=e.debug,a=e.decorators,p=e.destroyOnUnregister,E=e.form,h=e.initialValues,O=e.initialValuesEqual,y=e.keepDirtyOnReinitialize,_=e.mutators,P=e.onSubmit,k=e.subscription,j=void 0===k?g:k,S=e.validate,M=e.validateOnBlur,N=Object(r.a)(e,["debug","decorators","destroyOnUnregister","form","initialValues","initialValuesEqual","keepDirtyOnReinitialize","mutators","onSubmit","subscription","validate","validateOnBlur"]),F={debug:t,destroyOnUnregister:p,initialValues:h,keepDirtyOnReinitialize:y,mutators:_,onSubmit:P,validate:S,validateOnBlur:M},w=function(e){var t=i.a.useRef();return t.current||(t.current=e()),t.current}((function(){var e=E||Object(u.b)(F);return e.pauseValidation(),e})),B=Object(o.useState)((function(){var e={};return w.subscribe((function(t){e=t}),j)(),e})),A=B[0],I=B[1],x=d(A);Object(o.useEffect)((function(){w.isValidationPaused()&&w.resumeValidation();var e=[w.subscribe((function(e){s(e,x.current)||I(e)}),j)].concat(a?a.map((function(e){return e(w)})):[]);return function(){w.pauseValidation(),e.reverse().forEach((function(e){return e()}))}}),[a]),l(t,(function(){w.setConfig("debug",t)})),l(p,(function(){w.destroyOnUnregister=!!p})),l(y,(function(){w.setConfig("keepDirtyOnReinitialize",y)})),l(h,(function(){w.setConfig("initialValues",h)}),O||s),l(_,(function(){w.setConfig("mutators",_)})),l(P,(function(){w.setConfig("onSubmit",P)})),l(S,(function(){w.setConfig("validate",S)})),l(M,(function(){w.setConfig("validateOnBlur",M)}));var V={form:Object(n.a)({},w,{reset:function(e){f(e)?w.reset():w.reset(e)}}),handleSubmit:function(e){return e&&("function"===typeof e.preventDefault&&e.preventDefault(),"function"===typeof e.stopPropagation&&e.stopPropagation()),w.submit()}};return b(V,A),Object(o.createElement)(m.Provider,{value:w},c(Object(n.a)({},N,{__versions:v}),V,"ReactFinalForm"))}function h(e){var t=Object(o.useContext)(m);if(!t)throw new Error((e||"useForm")+" must be used inside of a <Form> component");return t}var O="undefined"!==typeof window&&window.navigator&&window.navigator.product&&"ReactNative"===window.navigator.product,y=u.c.reduce((function(e,t){return e[t]=!0,e}),{}),_=function(e,t){return void 0===e?"":e},P=function(e,t){return""===e?void 0:e},k=function(e,t){return e===t};function j(e,t){void 0===t&&(t={});var a=t,r=a.afterSubmit,i=a.allowNull,u=a.component,c=a.data,l=a.defaultValue,s=a.format,f=void 0===s?_:s,m=a.formatOnBlur,b=a.initialValue,v=a.multiple,g=a.parse,E=void 0===g?P:g,j=a.subscription,S=void 0===j?y:j,M=a.type,N=a.validateFields,F=a.value,w=h("useField"),B=d(t),A=function(t,a){return w.registerField(e,t,S,{afterSubmit:r,beforeSubmit:function(){var t=B.current,a=t.beforeSubmit,n=t.formatOnBlur,r=t.format,o=void 0===r?_:r;if(n){var i=w.getFieldState(e).value,u=o(i,e);u!==i&&w.change(e,u)}return a&&a()},data:c,defaultValue:l,getValidator:function(){return B.current.validate},initialValue:b,isEqual:function(e,t){return(B.current.isEqual||k)(e,t)},silent:a,validateFields:N})},I=Object(o.useRef)(!0),x=Object(o.useState)((function(){var e={},t=w.destroyOnUnregister;return w.destroyOnUnregister=!1,A((function(t){e=t}),!0)(),w.destroyOnUnregister=t,e})),V=x[0],D=x[1];Object(o.useEffect)((function(){return A((function(e){I.current?I.current=!1:D(e)}),!1)}),[e,c,l,b]);var C={onBlur:Object(o.useCallback)((function(e){if(V.blur(),m){var t=w.getFieldState(V.name);V.change(f(t.value,V.name))}}),[V.name,f,m]),onChange:Object(o.useCallback)((function(t){var a=t&&t.target?function(e,t,a,n){if(!n&&e.nativeEvent&&void 0!==e.nativeEvent.text)return e.nativeEvent.text;if(n&&e.nativeEvent)return e.nativeEvent.text;var r=e.target,o=r.type,i=r.value,u=r.checked;switch(o){case"checkbox":if(void 0!==a){if(u)return Array.isArray(t)?t.concat(a):[a];if(!Array.isArray(t))return t;var c=t.indexOf(a);return c<0?t:t.slice(0,c).concat(t.slice(c+1))}return!!u;case"select-multiple":return function(e){var t=[];if(e)for(var a=0;a<e.length;a++){var n=e[a];n.selected&&t.push(n.value)}return t}(e.target.options);default:return i}}(t,V.value,F,O):t;V.change(E(a,e))}),[F,e,E,V.change,V.value,M]),onFocus:Object(o.useCallback)((function(e){V.focus()}),[])},U={};!function(e,t){p(e,t,["active","data","dirty","dirtySinceLastSubmit","error","initial","invalid","length","modified","modifiedSinceLastSubmit","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","validating","visited"])}(U,V);var R=Object(n.a)({name:e,get value(){var t=V.value;return m?"input"===u&&(t=_(t)):t=f(t,e),null!==t||i||(t=""),"checkbox"===M||"radio"===M?F:"select"===u&&v?t||[]:t},get checked(){return"checkbox"===M?void 0===F?!!V.value:!(!Array.isArray(V.value)||!~V.value.indexOf(F)):"radio"===M?V.value===F:void 0}},C);return v&&(R.multiple=v),void 0!==M&&(R.type=M),{input:R,meta:U}}var S=Object(o.forwardRef)((function(e,t){var a=e.afterSubmit,i=e.allowNull,u=e.beforeSubmit,l=e.children,s=e.component,f=e.data,m=e.defaultValue,d=e.format,p=e.formatOnBlur,b=e.initialValue,v=e.isEqual,g=e.multiple,E=e.name,h=e.parse,O=e.subscription,y=e.type,_=e.validate,P=e.validateFields,k=e.value,S=Object(r.a)(e,["afterSubmit","allowNull","beforeSubmit","children","component","data","defaultValue","format","formatOnBlur","initialValue","isEqual","multiple","name","parse","subscription","type","validate","validateFields","value"]),M=j(E,{afterSubmit:a,allowNull:i,beforeSubmit:u,children:l,component:s,data:f,defaultValue:m,format:d,formatOnBlur:p,initialValue:b,isEqual:v,multiple:g,parse:h,subscription:O,type:y,validate:_,validateFields:P,value:k});if("function"===typeof l)return l(Object(n.a)({},M,S));if("string"===typeof s)return Object(o.createElement)(s,Object(n.a)({},M.input,{children:l,ref:t},S));if(!E)throw new Error("prop name cannot be undefined in <Field> component");return c(Object(n.a)({children:l,component:s,ref:t},S),M,"Field("+E+")")}))},88:function(e,t,a){"use strict";function n(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return c}));var r=a(0),o=a.n(r),i=function(e){var t=e.input,a=e.meta,r=n(e,["input","meta"]),i=r.element;return o.a.createElement(o.a.Fragment,null,o.a.createElement(i,Object.assign({},t,{placeholder:r.placeholder,autoFocus:r.autoFocus,maxLength:r.maxLength})),(a.submitError||a.error)&&(t.value.length>5||a.touched)&&o.a.createElement("span",null,a.submitError||a.error))},u=function(e){return o.a.createElement(i,Object.assign({element:"input"},e))},c=function(e){return o.a.createElement(i,Object.assign({element:"textarea"},e))}},89:function(e,t,a){e.exports={profile:"Profile_profile__3cqaC",topImage:"Profile_topImage__1QeV6",contentBlockWrapper:"Profile_contentBlockWrapper__1FqB6",contentBlock:"Profile_contentBlock__65spg",pageWrap:"Profile_pageWrap__3msTY",avatar:"Profile_avatar__2HO6t",pageInfoWrap:"Profile_pageInfoWrap__1UdYi",pageName:"Profile_pageName__13q-Z",status:"Profile_status__1rx6s",myStatus:"Profile_myStatus__mCoRb",enterStatus:"Profile_enterStatus__1MqOo",personalInfoWrap:"Profile_personalInfoWrap__2PMRp",topBorder:"Profile_topBorder__1s0dm",editModeButton:"Profile_editModeButton__P3IND",personalInfo:"Profile_personalInfo__1EwfG",aboutMeBlock:"Profile_aboutMeBlock__1vcdq",pageInfoRow:"Profile_pageInfoRow__JDm_r",contactsBlock:"Profile_contactsBlock__1OIs0",contactsTitle:"Profile_contactsTitle__3FTfj",contactsItem:"Profile_contactsItem__30pyP",postsBlock:"Profile_postsBlock__zeNoh",newPostBlock:"Profile_newPostBlock__giv8A",buttonWrap:"Profile_buttonWrap__1RmpI",existingPostsBlock:"Profile_existingPostsBlock__2kvb8",post:"Profile_post__2MTw2",likes:"Profile_likes__2O56D"}},90:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e,t,a){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduce((function(t,a){return t||a(e)}),void 0)}}(function(e){return function(t){return t&&t.length<e?"Min length is ".concat(e," symbols"):void 0}}(e),function(e){return function(t){return t&&t.length>e?"Max length is ".concat(e," symbols"):void 0}}(t),(n=a,function(e){return e?void 0:n}));var n}},92:function(e,t,a){e.exports=a.p+"static/media/les_tuman_derevia.712fe5c8.jpg"}}]);
//# sourceMappingURL=4.4ccff9e0.chunk.js.map