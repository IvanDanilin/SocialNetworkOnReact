{"version":3,"sources":["components/Main/Login/LoginForm.js","components/Main/Login/Login.js","utilities/validators/validators.js","components/common/FormControls/FormControls.js","components/Main/Login/Login.module.scss"],"names":["LoginForm","props","initialValues","rememberMe","passwordShown","onSubmit","email","password","render","handleSubmit","pristine","form","submitting","submitError","values","loading","Preloader","className","styles","textInputWrap","name","component","Input","placeholder","validate","fullValidation","type","disabled","onClick","reset","error","connect","state","isAuth","auth","authUserId","userId","signIn","getAuthUserData","useState","setLoading","a","FORM_ERROR","to","loginContainer","greeting","required","message","value","undefined","min","max","mess","validators","reduce","validator","composeValidators","length","minLength","maxLength","FormControl","input","meta","Element","element","autoFocus","touched","Textarea","module","exports"],"mappings":"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","file":"static/js/6.01aeab78.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Field, Form } from 'react-final-form';\r\nimport { fullValidation } from '../../../utilities/validators/validators';\r\nimport { Input } from '../../common/FormControls/FormControls';\r\nimport styles from './Login.module.scss';\r\nimport Preloader from '../../common/Preloader/Preloader';\r\n\r\nconst LoginForm = (props) => (\r\n\t<Form\r\n\t\tinitialValues={{\r\n\t\t\trememberMe: true,\r\n\t\t\tpasswordShown: false,\r\n\t\t}}\r\n\t\tonSubmit={({ email, password, rememberMe }) =>\r\n\t\t\tprops.onSubmit({ email, password, rememberMe })\r\n\t\t}\r\n\t\trender={({\r\n\t\t\thandleSubmit,\r\n\t\t\tpristine,\r\n\t\t\tform,\r\n\t\t\tsubmitting,\r\n\t\t\tsubmitError,\r\n\t\t\tvalues,\r\n\t\t}) => (\r\n\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t{props.loading && <Preloader />}\r\n\t\t\t\t<div className={styles.textInputWrap}>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tname='email'\r\n\t\t\t\t\t\tcomponent={Input}\r\n\t\t\t\t\t\tplaceholder='Enter your email'\r\n\t\t\t\t\t\tvalidate={fullValidation(3, 30, 'Required field')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={styles.textInputWrap}>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tname='password'\r\n\t\t\t\t\t\tcomponent={Input}\r\n\t\t\t\t\t\ttype={values.passwordShown ? 'text' : 'password'}\r\n\t\t\t\t\t\tplaceholder='Enter your password'\r\n\t\t\t\t\t\tvalidate={fullValidation(3, 30, 'Required field')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<Field type='checkbox' component='input' name='passwordShown' />{' '}\r\n\t\t\t\t\t\tShow password\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<Field type='checkbox' component='input' name='rememberMe' />{' '}\r\n\t\t\t\t\t\tRemember me\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button type='submit' disabled={submitting}>\r\n\t\t\t\t\tLog in\r\n\t\t\t\t</button>\r\n\t\t\t\t<button\r\n\t\t\t\t\ttype='button'\r\n\t\t\t\t\tdisabled={pristine || submitting}\r\n\t\t\t\t\tonClick={form.reset}\r\n\t\t\t\t>\r\n\t\t\t\t\tClear\r\n\t\t\t\t</button>\r\n\t\t\t\t{submitError && <div className={styles.error}>{submitError}</div>}\r\n\t\t\t</form>\r\n\t\t)}\r\n\t/>\r\n);\r\n\r\nexport default LoginForm;\r\n","import { FORM_ERROR } from 'final-form';\r\nimport React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { getAuthUserData, signIn } from '../../../redux/reducers/authReducer';\r\nimport styles from './Login.module.scss';\r\nimport LoginForm from './LoginForm';\r\n\r\nconst Login = (props) => {\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst onSubmit = async (values) => {\r\n\t\tsetLoading(true);\r\n\t\tconst error = await props.signIn(values);\r\n\t\tsetLoading(false);\r\n\t\tif (error) {\r\n\t\t\treturn { [FORM_ERROR]: error };\r\n\t\t}\r\n\t};\r\n\r\n\treturn props.isAuth ? (\r\n\t\t<Redirect to={`/profile/${props.authUserId}`} />\r\n\t) : (\r\n\t\t<div className={styles.loginContainer}>\r\n\t\t\t<div className={styles.greeting}>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tWelcome! For future use, enter \r\n\t\t\t\t\tthe following data for authorization:\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tEmail: <mark>free@samuraijs.com</mark>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tPassword: <mark>free</mark>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t<LoginForm onSubmit={onSubmit} loading={loading} />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisAuth: state.auth.isAuth,\r\n\tauthUserId: state.auth.userId,\r\n});\r\n\r\nexport default connect(mapStateToProps, { signIn, getAuthUserData })(Login);\r\n","export const required = (message) => (value) => (value ? undefined : message);\r\n\r\nexport const maxLength = (max) => (value) =>\r\n\tvalue && value.length > max ? `Max length is ${max} symbols` : undefined;\r\n\r\nconst minLength = (min) => (value) =>\r\n\tvalue && value.length < min ? `Min length is ${min} symbols` : undefined;\r\n\r\nconst composeValidators = (...validators) => (value) =>\r\n\tvalidators.reduce((error, validator) => error || validator(value), undefined);\r\n\r\nexport const fullValidation = (min, max, mess) =>\r\n\tcomposeValidators(minLength(min), maxLength(max), required(mess));\r\n","import React from 'react';\r\n\r\n// Компонент возвращающий поле для ввода, применяется в Field\r\n// Принимает данные ввода и мета-данные (ошибки и тд.)\r\nconst FormControl = ({ input, meta, ...props }) => {\r\n\t// Принимает в пропсах нужное поле ввода (input, textarea...)\r\n\tconst Element = props.element;\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{/* Создание поля ввода и передача в него данных */}\r\n\t\t\t<Element\r\n\t\t\t\t{...input}\r\n\t\t\t\tplaceholder={props.placeholder}\r\n\t\t\t\tautoFocus={props.autoFocus}\r\n\t\t\t\tmaxLength={props.maxLength}\r\n\t\t\t/>\r\n\t\t\t{/* Вывод на основании ошибок валидации */}\r\n\t\t\t{meta.error &&\r\n\t\t\t\t// Если есть ошибка и введено больше 5 символов, выводит ошибку\r\n\t\t\t\t(input.value.length > 5 ? (\r\n\t\t\t\t\t<span>{meta.error}</span>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t// Если есть ошибка, но символов меньше 5, выводит ошибку когда поле было затронуто\r\n\t\t\t\t\tmeta.touched && <span>{meta.error}</span>\r\n\t\t\t\t))}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\n// Компоненты для создания конкретных полей ввода\r\nexport const Input = (props) => {\r\n\treturn <FormControl element='input' {...props} />;\r\n};\r\nexport const Textarea = (props) => (\r\n\t<FormControl element='textarea' {...props} />\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginContainer\":\"Login_loginContainer__3equC\",\"greeting\":\"Login_greeting__12QKJ\",\"textInputWrap\":\"Login_textInputWrap__29_sN\",\"error\":\"Login_error__PSmDI\"};"],"sourceRoot":""}