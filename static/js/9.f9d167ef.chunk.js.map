{"version":3,"sources":["utilities/useScrollToTop.js","components/Main/Users/Users.module.scss","components/common/Pagination/Pagination.module.scss","components/common/Pagination/Pagination.js","components/Main/Users/Users.js","components/Main/Users/UsersContainer.js"],"names":["useScrollToTop","pathname","useLocation","useEffect","window","scrollTo","module","exports","Pagination","pageSize","currentPage","onPageChanged","portionSize","totalItemsCount","pagesCount","Math","ceil","pages","i","push","portionCount","portionNumberCurrentPage","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","length","className","styles","pagination","buttons","firstPageButton","onClick","prevButton","pageNumbers","filter","page","map","selectedPage","key","nextButton","endPageButton","Users","props","usersPage","totalUsersCount","users","u","id","userBlock","photoBlock","photo","to","src","photos","small","defaultAvatar","alt","followed","disabled","followingInProgress","some","unfollow","button","follow","infoBlock","name","status","Preloader","connect","state","getUsers","setUsers","pageNumber"],"mappings":"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","file":"static/js/9.f9d167ef.chunk.js","sourcesContent":["import { useEffect } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nconst useScrollToTop = () => {\r\n\tconst { pathname } = useLocation();\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.scrollTo(0, 0);\r\n\t}, [pathname]);\r\n\r\n\treturn null;\r\n}\r\n\r\nexport default useScrollToTop","// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersPage\":\"Users_usersPage__2OlcQ\",\"userBlock\":\"Users_userBlock__1UheA\",\"photoBlock\":\"Users_photoBlock__3enQI\",\"photo\":\"Users_photo__2TmiS\",\"button\":\"Users_button__1ww34\",\"follow\":\"Users_follow__3swR2\",\"unfollow\":\"Users_unfollow__QG3jF\",\"infoBlock\":\"Users_infoBlock__leREN\",\"name\":\"Users_name__1PC7_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"Pagination_pagination__2r9Gn\",\"pageNumbers\":\"Pagination_pageNumbers__1jXOq\",\"selectedPage\":\"Pagination_selectedPage__UbSK-\",\"buttons\":\"Pagination_buttons__1Grah\",\"nextButton\":\"Pagination_nextButton__2TyOp\",\"prevButton\":\"Pagination_prevButton__2OJMM\",\"firstPageButton\":\"Pagination_firstPageButton__3IgZ1\",\"endPageButton\":\"Pagination_endPageButton__3w5yo\"};","import React, { useState, useEffect } from 'react';\r\nimport styles from './Pagination.module.scss';\r\n\r\nconst Pagination = ({\r\n\tpageSize,\r\n\tcurrentPage = 1,\r\n\tonPageChanged,\r\n\tportionSize = 10,\r\n\ttotalItemsCount,\r\n}) => {\r\n\t// Количество страниц расчитывается из общего количества\r\n\t// пользователей (totalItemsCount), разделенного на\r\n\t// количество пользователей на одной странице (pageSize)\r\n\tlet pagesCount = Math.ceil(totalItemsCount / pageSize);\r\n\r\n\t// Создание массива и заполнение его номерами страниц\r\n\t// для их отрисовки на странице\r\n\t// [1, 2, 3...n] (n = (pagesCount))\r\n\tconst pages = [];\r\n\tfor (let i = 1; i <= pagesCount; i++) {\r\n\t\tpages.push(i);\r\n\t}\r\n\r\n\t// * Данные действия выполняются для отображения большого\r\n\t// * кол-ва страниц по частям (portion)\r\n\t// Вычисление количества порций на основании общего\r\n\t// кол-ва страниц и желаемого размера одной порции\r\n\tconst portionCount = Math.ceil(pagesCount / portionSize);\r\n\t// Вычисление текущей порции для отображения на основании текущей\r\n\t// страницы и размера одной порции (например если размер порции\r\n\t// 10 и выбрана 14 страница, отобразится 2я порция от 10 до 20)\r\n\tconst portionNumberCurrentPage = Math.ceil(currentPage / portionSize);\r\n\t// State, который хранит номер текущей порции для отображения\r\n\t// Задается текущей страницей при ее загрузке или кнопками\r\n\tconst [portionNumber, setPortionNumber] = useState(portionNumberCurrentPage);\r\n\t// Вычисление первого номера в текущей порции\r\n\tconst leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\r\n\t// Вычисление последнего номера в текущей порции\r\n\tconst rightPortionPageNumber = portionNumber * portionSize;\r\n\t// Вычисление текущей порции и запись порции в state,\r\n\t// при смене страницы.\r\n\tuseEffect(() => {\r\n\t\tconst portionNumberCurrentPage = Math.ceil(currentPage / portionSize);\r\n\t\tsetPortionNumber(portionNumberCurrentPage);\r\n\t}, [currentPage, portionSize]);\r\n\t// *----------------------------------------------------------\r\n\r\n\t// Отображение пагинации если страниц больше одной\r\n\treturn pages.length > 1 ? (\r\n\t\t<div className={styles.pagination}>\r\n\t\t\t{/* Кнопка переключения порции влево */}\r\n\t\t\t<div className={styles.buttons}>\r\n\t\t\t\t{portionNumber > 1 && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName={styles.firstPageButton}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tonPageChanged(1);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t></button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName={styles.prevButton}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tonPageChanged(leftPortionPageNumber - 1);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t></button>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t{/* Номера страниц */}\r\n\t\t\t<div className={styles.pageNumbers}>\r\n\t\t\t\t{pages\r\n\t\t\t\t\t// Возвращает из всего массива номеров страниц, номера текущей порции\r\n\t\t\t\t\t// выбирая только страницы от первого номера порции до последнего\r\n\t\t\t\t\t.filter(\r\n\t\t\t\t\t\t(page) =>\r\n\t\t\t\t\t\t\tpage >= leftPortionPageNumber && page <= rightPortionPageNumber\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.map((page) => (\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclassName={currentPage === page ? styles.selectedPage : ''}\r\n\t\t\t\t\t\t\tonClick={currentPage !== page ? () => onPageChanged(page) : null}\r\n\t\t\t\t\t\t\tkey={page}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{page}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t{/* Кнопка переключения порции вправо */}\r\n\t\t\t<div className={styles.buttons}>\r\n\t\t\t\t{portionCount > portionNumber && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName={styles.nextButton}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tonPageChanged(rightPortionPageNumber + 1);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t></button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName={styles.endPageButton}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tonPageChanged(pagesCount);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t></button>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t) : (\r\n\t\t''\r\n\t);\r\n};\r\n\r\nexport default Pagination;\r\n","import React from 'react';\r\nimport styles from './Users.module.scss';\r\nimport { NavLink } from 'react-router-dom';\r\nimport Pagination from '../../common/Pagination/Pagination';\r\nimport Preloader from '../../common/Preloader/Preloader';\r\nimport useScrollToTop from '../../../utilities/useScrollToTop';\r\n\r\nconst Users = (props) => {\r\n\tuseScrollToTop()\r\n\treturn (\r\n\t\t<div className={styles.usersPage}>\r\n\t\t\t<Pagination\r\n\t\t\t\tpageSize={props.pageSize}\r\n\t\t\t\tcurrentPage={props.currentPage}\r\n\t\t\t\tonPageChanged={props.onPageChanged}\r\n\t\t\t\ttotalItemsCount={props.totalUsersCount}\r\n\t\t\t/>\r\n\t\t\t{props.users ? (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{props.users.map((u) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div key={u.id} className={styles.userBlock}>\r\n\t\t\t\t\t\t\t\t<div className={styles.photoBlock}>\r\n\t\t\t\t\t\t\t\t\t<div className={styles.photo}>\r\n\t\t\t\t\t\t\t\t\t\t<NavLink to={'/profile/' + u.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t<img src={u.photos.small || props.defaultAvatar} alt='' />\r\n\t\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t{u.followed ? (\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={props.followingInProgress.some(\r\n\t\t\t\t\t\t\t\t\t\t\t\t(id) => id === u.id\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tprops.unfollow(u.id);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={`${styles.button} ${styles.unfollow}`}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tUnfollow\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={props.followingInProgress.some(\r\n\t\t\t\t\t\t\t\t\t\t\t\t(id) => id === u.id\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tprops.follow(u.id);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={`${styles.button} ${styles.follow}`}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tFollow\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className={styles.infoBlock}>\r\n\t\t\t\t\t\t\t\t\t<div className={styles.name}>{u.name}</div>\r\n\t\t\t\t\t\t\t\t\t<div>{u.status}</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t<Pagination\r\n\t\t\t\t\t\tpageSize={props.pageSize}\r\n\t\t\t\t\t\tcurrentPage={props.currentPage}\r\n\t\t\t\t\t\tonPageChanged={props.onPageChanged}\r\n\t\t\t\t\t\ttotalItemsCount={props.totalUsersCount}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<Preloader />\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Users;\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Users from './Users';\r\nimport {\r\n\tfollow,\r\n\tunfollow,\r\n\tgetUsers,\r\n\tsetUsers,\r\n} from '../../../redux/reducers/usersReducer';\r\nimport defaultAvatar from '../../../assets/image/defaultAvatar.png';\r\n\r\nconst UsersContainer = ({\r\n\tgetUsers,\r\n\tcurrentPage,\r\n\tpageSize,\r\n\ttotalUsersCount,\r\n\tusers,\r\n\tfollowingInProgress,\r\n\tfollow,\r\n\tunfollow,\r\n\tsetUsers,\r\n}) => {\r\n\t// Получение списка пользователей при рендере\r\n\tuseEffect(() => {\r\n\t\tgetUsers(currentPage, pageSize);\r\n\t\treturn () => {\r\n\t\t\tsetUsers(null);\r\n\t\t};\r\n\t}, [getUsers, currentPage, pageSize, setUsers]);\r\n\r\n\t// Получение списка пользователей при выборе страницы\r\n\tconst onPageChanged = (pageNumber) => {\r\n\t\tgetUsers(pageNumber, pageSize);\r\n\t};\r\n\treturn (\r\n\t\t<Users\r\n\t\t\ttotalUsersCount={totalUsersCount}\r\n\t\t\tpageSize={pageSize}\r\n\t\t\tcurrentPage={currentPage}\r\n\t\t\tonPageChanged={onPageChanged}\r\n\t\t\tusers={users}\r\n\t\t\tdefaultAvatar={defaultAvatar}\r\n\t\t\tfollowingInProgress={followingInProgress}\r\n\t\t\tfollow={follow}\r\n\t\t\tunfollow={unfollow}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tcurrentPage: state.usersPage.currentPage,\r\n\t\tusers: state.usersPage.users,\r\n\t\tfollowingInProgress: state.usersPage.followingInProgress,\r\n\t\tpageSize: state.usersPage.pageSize,\r\n\t\ttotalUsersCount: state.usersPage.totalUsersCount,\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n\tfollow,\r\n\tunfollow,\r\n\tgetUsers,\r\n\tsetUsers,\r\n})(UsersContainer);\r\n"],"sourceRoot":""}